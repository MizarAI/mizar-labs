
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>mizarlabs.model package &#8212; MizarLabs 0.1.3 documentation</title>
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <script id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
   
  <link rel="stylesheet" href="_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="mizarlabs-model-package">
<h1>mizarlabs.model package<a class="headerlink" href="#mizarlabs-model-package" title="Permalink to this headline">¶</a></h1>
<div class="section" id="submodules">
<h2>Submodules<a class="headerlink" href="#submodules" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="module-mizarlabs.model.bootstrapping">
<span id="mizarlabs-model-bootstrapping-module"></span><h2>mizarlabs.model.bootstrapping module<a class="headerlink" href="#module-mizarlabs.model.bootstrapping" title="Permalink to this headline">¶</a></h2>
<dl class="py function">
<dt id="mizarlabs.model.bootstrapping.calc_average_uniqueness">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.bootstrapping.</span></code><code class="sig-name descname"><span class="pre">calc_average_uniqueness</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind_mat_csc</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">scipy.sparse.csc.csc_matrix</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="_modules/mizarlabs/model/bootstrapping.html#calc_average_uniqueness"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.bootstrapping.calc_average_uniqueness" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculates the average uniqueness of an indicator matrix.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>ind_mat_csc</strong> (<em>sparse.csc_matrix</em>) – indicator matrix, with size (T x N), where T is no. of timestamps and N the number of samples.</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>array with average uniqueness per column in the indicator matrix, where a column represents a sample</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.ndarray</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.bootstrapping.get_ind_matrix">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.bootstrapping.</span></code><code class="sig-name descname"><span class="pre">get_ind_matrix</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples_info_sets</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_bars</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_end_time_column_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">return_indices</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">scipy.sparse.lil.lil_matrix</span><span class="p"><span class="pre">,</span> </span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">scipy.sparse.lil.lil_matrix</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timestamps.Timestamp</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/bootstrapping.html#get_ind_matrix"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.bootstrapping.get_ind_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Snippet 4.3, page 65, Build an Indicator Matrix
Get indicator matrix. The book implementation uses bar_index as input,
however there is no explanation how to form it. We decided that
using triple_barrier_events and price bars by analogy with concurrency
is the best option.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>samples_info_sets</strong> (<em>pd.Series</em>) – Series indicating the start and end time of a sample, e.g. from triple barrier</p></li>
<li><p><strong>price_bars</strong> (<em>pd.DataFrame</em>) – Price bars which were used to form triple barrier events or other labelling method</p></li>
<li><p><strong>event_end_time_column_name</strong> (<em>str</em>) – Column name</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Indicator binary matrix indicating what (price) bars influence the label for each observation and in
addition in can also return the respective timestamp indices</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Union[sparse.lil_matrix, Tuple[sparse.lil_matrix, pd.Timestamp]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.bootstrapping.seq_bootstrap">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.bootstrapping.</span></code><code class="sig-name descname"><span class="pre">seq_bootstrap</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ind_mat</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">scipy.sparse.csc.csc_matrix</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_length</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.random.mtrand.RandomState</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_probs_every</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.array</span><a class="reference internal" href="_modules/mizarlabs/model/bootstrapping.html#seq_bootstrap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.bootstrapping.seq_bootstrap" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a numpy array with tokenized indices of selected samples,
which have been selected by sequential bootstrap procedure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ind_mat</strong> (<em>sparse.csc_matrix</em>) – indicator matrix from triple barrier events</p></li>
<li><p><strong>sample_length</strong> (<em>int</em><em>, </em><em>optional</em>) – Length of bootstrapped sample, defaults to None</p></li>
<li><p><strong>random_state</strong> (<em>np.random.RandomState</em><em>, </em><em>optional</em>) – random state, defaults to np.random.RandomState()</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>numpy array with tokenized indices of selected samples</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>np.array</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mizarlabs.model.model_selection">
<span id="mizarlabs-model-model-selection-module"></span><h2>mizarlabs.model.model_selection module<a class="headerlink" href="#module-mizarlabs.model.model_selection" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">BaseTimeSeriesCrossValidator</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_times</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_times</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#BaseTimeSeriesCrossValidator"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.model_selection._split._BaseKFold</span></code></p>
<p>Abstract class for time series cross-validation.</p>
<p>Time series cross-validation requires each sample has a prediction
time pred_time, at which the features are used to predict the response,
and an evaluation time eval_time, at which the response is known and the
error can be computed.
Importantly, it means that unlike in standard sklearn cross-validation,
the samples X, response y, pred_times and eval_times must all be pandas
dataframe/series having the same index. It is also assumed that the
samples are time-ordered with respect to the prediction time
(i.e. pred_times is non-decreasing).</p>
<dl class="simple">
<dt>n_splits<span class="classifier">int, default=10</span></dt><dd><p>Number of folds. Must be at least 2.</p>
</dd>
</dl>
<dl class="py method">
<dt id="mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator.split">
<em class="property"><span class="pre">abstract</span> </em><code class="sig-name descname"><span class="pre">split</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#BaseTimeSeriesCrossValidator.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the indices of the train and test sets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> – pd.DataFrame, shape (n_samples, n_features), required</p></li>
<li><p><strong>y</strong> – pd.Series</p></li>
<li><p><strong>groups</strong> – not used, inherited from _BaseKFold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.model_selection.CombPurgedKFoldCV">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">CombPurgedKFoldCV</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_test_splits</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">2</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">pred_times</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">eval_times</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embargo_td</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">Timedelta('0</span> <span class="pre">days</span> <span class="pre">00:00:00')</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#CombPurgedKFoldCV"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.CombPurgedKFoldCV" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator" title="mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator"><code class="xref py py-class docutils literal notranslate"><span class="pre">mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator</span></code></a></p>
<p>Purged and embargoed combinatorial cross-validation.</p>
<p>As described in Advances in financial machine learning,
Marcos Lopez de Prado, 2018.</p>
<p>The samples are decomposed into n_groups folds containing equal numbers of
samples, without shuffling. In each cross validation round, n_test_splits
folds are used as the test set, while the other folds are used as the train
set. There are as many rounds as n_test_splits folds among the n_groups
folds.Each sample should be tagged with a prediction time pred_time and an
evaluation time eval_time. The split is such that the intervals
[pred_times, eval_times] associated to samples in the train and test set do
not overlap. (The overlapping samples are dropped.) In addition,
an “embargo” period is defined, giving the minimal time between an
evaluation time in the test set and a prediction time in the training set.
This is to avoid, in the presence of temporal correlation, a contamination
of the test set by the train set.</p>
<dl class="simple">
<dt>n_groups<span class="classifier">int, default=10</span></dt><dd><p>Number of folds. Must be at least 2.</p>
</dd>
<dt>n_test_splits<span class="classifier">int, default=2</span></dt><dd><p>Number of folds used in the test set. Must be at least 1.</p>
</dd>
<dt>pred_times<span class="classifier">pd.Series, shape (n_samples,), required</span></dt><dd><p>Times at which predictions are made. pred_times.index has to
coincide with X.index.</p>
</dd>
<dt>eval_times<span class="classifier">pd.Series, shape (n_samples,), required</span></dt><dd><p>Times at which the response becomes available and the error can
be computed. eval_times.index has to
coincide with X.index.</p>
</dd>
<dt>embargo_td<span class="classifier">pd.Timedelta, default=0</span></dt><dd><p>Embargo period (see explanations above).</p>
</dd>
</dl>
<dl class="py attribute">
<dt id="mizarlabs.model.model_selection.CombPurgedKFoldCV.default_embargo_td">
<code class="sig-name descname"><span class="pre">default_embargo_td</span></code><em class="property"> <span class="pre">=</span> <span class="pre">Timedelta('0</span> <span class="pre">days</span> <span class="pre">00:00:00')</span></em><a class="headerlink" href="#mizarlabs.model.model_selection.CombPurgedKFoldCV.default_embargo_td" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.model_selection.CombPurgedKFoldCV.split">
<code class="sig-name descname"><span class="pre">split</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">groups</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Iterable</span><span class="p"><span class="pre">[</span></span><span class="pre">Tuple</span><span class="p"><span class="pre">[</span></span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.ndarray</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#CombPurgedKFoldCV.split"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.CombPurgedKFoldCV.split" title="Permalink to this definition">¶</a></dt>
<dd><p>Yield the indices of the train and test sets.</p>
<p>Although the samples are passed in the form of a pandas dataframe,
the indices returned are position indices, not labels.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> – pd.DataFrame, shape (n_samples, n_features), required</p></li>
<li><p><strong>y</strong> – pd.Series</p></li>
<li><p><strong>groups</strong> – not used, inherited from _BaseKFold</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.model_selection.LogUniformGen">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">LogUniformGen</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">momtype</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">xtol</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1e-14</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">badvalue</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">name</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">longname</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">shapes</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">extradoc</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">seed</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#LogUniformGen"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.LogUniformGen" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">scipy.stats._distn_infrastructure.rv_continuous</span></code></p>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.model_selection.combinatorial_cross_validation_paths">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">combinatorial_cross_validation_paths</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mizarlabs.model.model_selection.CombPurgedKFoldCV" title="mizarlabs.model.model_selection.CombPurgedKFoldCV"><span class="pre">mizarlabs.model.model_selection.CombPurgedKFoldCV</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_pipeline</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">signal_pipeline_fit_params</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_column_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'label'</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#combinatorial_cross_validation_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.combinatorial_cross_validation_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Return the paths for the combinatorial cross validation analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X</strong> (<em>pd.DataFrame</em>) – Dataframe containing the features</p></li>
<li><p><strong>y</strong> (<em>pd.DataFrame</em>) – DataFrame containing the target and target info</p></li>
<li><p><strong>signal_pipeline</strong> – The signal pipeline we want to use for creating features</p></li>
<li><p><strong>signal_pipeline_fit_params</strong> – Fit params for the signal pipeline</p></li>
<li><p><strong>cv</strong> (<a class="reference internal" href="#mizarlabs.model.model_selection.CombPurgedKFoldCV" title="mizarlabs.model.model_selection.CombPurgedKFoldCV"><em>CombPurgedKFoldCV</em></a>) – Combinatorial purged cv object</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.model_selection.compute_back_test_paths">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">compute_back_test_paths</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">n_splits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_test_splits</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">int</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#compute_back_test_paths"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.compute_back_test_paths" title="Permalink to this definition">¶</a></dt>
<dd><p>Compute the number of backtest paths for the combinatorial crossvalidation.</p>
<p>As explained in pg. 164 of De Prado book this function calculates
the number of paths that can be used given the total number of splits
(<cite>n_splits</cite>) and the test splits (<cite>n_test_splits</cite>).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>n_splits</strong> (<em>int</em>) – the total number of splits</p></li>
<li><p><strong>n_test_splits</strong> (<em>int</em>) – the number of splits used in the test set</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>number of the backtest paths</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.model_selection.embargo">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">embargo</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator" title="mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator"><span class="pre">mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_indices</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_indices</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_fold_end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#embargo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.embargo" title="Permalink to this definition">¶</a></dt>
<dd><p>Apply the embargo procedure to part of the train set.</p>
<p>This amounts to dropping the train set samples whose prediction time occurs
within self.embargo_dt of the test set sample evaluation times.
This method applies the embargo only to the part of the training set
immediately following the end of the test set determined by test_fold_end.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cv</strong> – Cross-validation class
Needs to have the attributes cv.pred_times, cv.eval_times,
cv.embargo_dt and cv.indices.</p></li>
<li><p><strong>train_indices</strong> – np.ndarray
A numpy array containing all the indices of the samples currently
included in the train set.</p></li>
<li><p><strong>test_indices</strong> – np.ndarray
A numpy array containing all the indices of the samples in the test
set.</p></li>
<li><p><strong>test_fold_end</strong> – int
Index corresponding to the end of a test set block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>train_indices: np.ndarray
The same array, with the indices subject to embargo removed.</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.model_selection.log_uniform">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">log_uniform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">a</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">b</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#log_uniform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.log_uniform" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py function">
<dt id="mizarlabs.model.model_selection.purge">
<code class="sig-prename descclassname"><span class="pre">mizarlabs.model.model_selection.</span></code><code class="sig-name descname"><span class="pre">purge</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cv</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator" title="mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator"><span class="pre">mizarlabs.model.model_selection.BaseTimeSeriesCrossValidator</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_indices</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">numpy.ndarray</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_fold_start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">test_fold_end</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">numpy.ndarray</span><a class="reference internal" href="_modules/mizarlabs/model/model_selection.html#purge"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.model_selection.purge" title="Permalink to this definition">¶</a></dt>
<dd><p>Purge part of the train set.</p>
<p>Given a left boundary index test_fold_start of the test set,
this method removes from the train set all the
samples whose evaluation time is posterior to the prediction time of the
first test sample after the boundary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>cv</strong> – Cross-validation class,
Needs to have the attributes cv.pred_times, cv.eval_times and
cv.indices.</p></li>
<li><p><strong>train_indices</strong> – np.ndarray, A numpy array containing all the indices
of the samples currently included in the train set.</p></li>
<li><p><strong>test_fold_start</strong> – int, Index corresponding to the start of a test
set block.</p></li>
<li><p><strong>test_fold_end</strong> – int, Index corresponding to the end of the same test
set block.</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>train_indices: np.ndarray
A numpy array containing the train indices purged at test_fold_start.</p>
</dd>
</dl>
</dd></dl>

</div>
<div class="section" id="module-mizarlabs.model.pipeline">
<span id="mizarlabs-model-pipeline-module"></span><h2>mizarlabs.model.pipeline module<a class="headerlink" href="#module-mizarlabs.model.pipeline" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mizarlabs.model.pipeline.MizarFeatureUnion">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.pipeline.</span></code><code class="sig-name descname"><span class="pre">MizarFeatureUnion</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">transformer_list</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">transformer_weights</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#MizarFeatureUnion"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.MizarFeatureUnion" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.pipeline.FeatureUnion</span></code></p>
<dl class="py method">
<dt id="mizarlabs.model.pipeline.MizarFeatureUnion.fit_transform">
<code class="sig-name descname"><span class="pre">fit_transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fit_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#MizarFeatureUnion.fit_transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.MizarFeatureUnion.fit_transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit all transformers, transform the data and concatenate results.</p>
<dl class="simple">
<dt>X<span class="classifier">iterable or array-like, depending on transformers</span></dt><dd><p>Input data to be transformed.</p>
</dd>
<dt>y<span class="classifier">array-like, shape (n_samples, …), optional</span></dt><dd><p>Targets for supervised learning.</p>
</dd>
</dl>
<dl class="simple">
<dt>X_t<span class="classifier">array-like or sparse matrix, shape (n_samples, sum_n_components)</span></dt><dd><p>hstack of results of transformers. sum_n_components is the
sum of n_components (output dimension) over transformers.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.MizarFeatureUnion.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#MizarFeatureUnion.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.MizarFeatureUnion.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Transform X separately by each transformer, concatenate results.</p>
<dl class="simple">
<dt>X<span class="classifier">iterable or array-like, depending on transformers</span></dt><dd><p>Input data to be transformed.</p>
</dd>
</dl>
<dl class="simple">
<dt>X_t<span class="classifier">array-like or sparse matrix, shape (n_samples, sum_n_components)</span></dt><dd><p>hstack of results of transformers. sum_n_components is the
sum of n_components (output dimension) over transformers.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.pipeline.MizarPipeline">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.pipeline.</span></code><code class="sig-name descname"><span class="pre">MizarPipeline</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">steps</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">memory</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#MizarPipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.MizarPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.pipeline.Pipeline</span></code></p>
<p>Implementation of pipeline that allows sample_weight as a fit argument</p>
<dl class="py method">
<dt id="mizarlabs.model.pipeline.MizarPipeline.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_weight</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">fit_params</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#MizarPipeline.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.MizarPipeline.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the model</p>
<p>Fit all the transforms one after the other and transform the
data, then fit the transformed data using the final estimator.</p>
<dl class="simple">
<dt>X<span class="classifier">iterable</span></dt><dd><p>Training data. Must fulfill input requirements of first step of the
pipeline.</p>
</dd>
<dt>y<span class="classifier">iterable, default=None</span></dt><dd><p>Training targets. Must fulfill label requirements for all steps of
the pipeline.</p>
</dd>
<dt><a href="#id1"><span class="problematic" id="id2">**</span></a>fit_params<span class="classifier">dict of string -&gt; object</span></dt><dd><p>Parameters passed to the <code class="docutils literal notranslate"><span class="pre">fit</span></code> method of each step, where
each parameter name is prefixed such that parameter <code class="docutils literal notranslate"><span class="pre">p</span></code> for step
<code class="docutils literal notranslate"><span class="pre">s</span></code> has key <code class="docutils literal notranslate"><span class="pre">s__p</span></code>.</p>
</dd>
</dl>
<dl class="simple">
<dt>self<span class="classifier">Pipeline</span></dt><dd><p>This estimator</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.pipeline.</span></code><code class="sig-name descname"><span class="pre">StrategySignalPipeline</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">primary_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">sklearn.base.BaseEstimator</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_transformers_primary_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">sklearn.base.TransformerMixin</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">feature_transformers_metalabeling_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">sklearn.base.TransformerMixin</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metalabeling_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">sklearn.base.BaseEstimator</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cpcv_num_groups</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">6</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">embargo_td</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">None</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas._libs.tslibs.timedeltas.Timedelta</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metalabeling_use_proba_primary_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">metalabeling_use_predictions_primary_model</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">True</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bet_sizer</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><a class="reference internal" href="mizarlabs.transformers.trading.html#mizarlabs.transformers.trading.bet_sizing.BetSizingFromProbabilities" title="mizarlabs.transformers.trading.bet_sizing.BetSizingFromProbabilities"><span class="pre">mizarlabs.transformers.trading.bet_sizing.BetSizingFromProbabilities</span></a><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>A trading strategy.</p>
<p>A trading strategy can include machine learning models or simple technical
indicator transformers. From their outputs the strategy decides whether or
not to take a position and its size.</p>
<p>This strategy must have a primary model. A metalabeling model and
a bet sizer are optional.</p>
<p>The simplest setting includes only a primary model. In this case the side
is calculated with the predict of the primary model, while the size is
calculated from the predict_proba of the primary model.</p>
<p>Adding a bet sizer means that the size is calculated from the bet sizer
and not anymore from the primary model probabilities. The bet sizer
calculates the bet size from the probabilities of the primary model
predictions.</p>
<p>When metalabeling model is set then the size comes from the metalabeling
model, unless a bet sizer is set and in this case the bet sizer calculates
the size from the probabilites provided by the metalabeling model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>primary_model</strong> (<em>BaseEstimator</em>) – The primary model estimator</p></li>
<li><p><strong>feature_transformers_primary_model</strong> (<em>TransformerMixin</em>) – The feature transformer that
transforms the data for the
primary model</p></li>
<li><p><strong>feature_transformers_metalabeling_model</strong> (<em>TransformerMixin</em>) – The feature transformer that
transforms the data for the
metalabeling model</p></li>
<li><p><strong>metalabeling_model</strong> (<em>BaseEstimator</em>) – The metalabeling model estimator</p></li>
<li><p><strong>cpcv_num_groups</strong> (<em>int</em>) – The number of groups for the combinatorial cross
validation used for the metalabels calculation</p></li>
<li><p><strong>embargo_td</strong> (<em>pd.Timedelta</em>) – The number of days to use for the embargo of
combinatorial cross validation</p></li>
<li><p><strong>metalabeling_use_proba_primary_model</strong> (<em>bool</em>) – Whether to use probabilities
of the primary model as
features in the metalabeling
model</p></li>
<li><p><strong>metalabeling_use_predictions_primary_model</strong> – Whether to use
predictions of the
primary model as feature
in the metalabeling
model</p></li>
<li><p><strong>bet_sizer</strong> (<a class="reference internal" href="mizarlabs.transformers.trading.html#mizarlabs.transformers.trading.bet_sizing.BetSizingFromProbabilities" title="mizarlabs.transformers.trading.bet_sizing.BetSizingFromProbabilities"><em>BetSizingFromProbabilities</em></a>) – The transformer to use for the calculation of the bet size</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label_column_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'label'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_weight_primary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_weight_metalabeling</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsampled_indices_primary</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.indexes.datetimes.DatetimeIndex</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">downsampled_indices_metalabeling</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.indexes.datetimes.DatetimeIndex</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align_on</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">align_how</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">str</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.fit" title="Permalink to this definition">¶</a></dt>
<dd><p>Fit the strategy pipeline</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – Dictionary containing all the features for the data
for the primary and metalabeling model. The data can be
bar and/or tick data</p></li>
<li><p><strong>y</strong> (<em>pd.DataFrame</em>) – Pandas DataFrame with class labels for the primary model,
where the index is the start_time of the event and the column
“event_end_time” indicates when the event has ended.</p></li>
<li><p><strong>label_column_name</strong> (<em>str</em>) – The name of the column containing the label</p></li>
<li><p><strong>sample_weight_primary</strong> (<em>pd.Series</em>) – The sample weights for training the primary model</p></li>
<li><p><strong>sample_weight_metalabeling</strong> (<em>pd.Series</em>) – The sample weights for training the metalabeling model</p></li>
<li><p><strong>downsampled_indices_primary</strong> (<em>pd.DatetimeIndex</em>) – The indices to use for training the
primary model, they should be a subset
of the indices in the dataframes</p></li>
<li><p><strong>downsampled_indices_metalabeling</strong> (<em>pd.DatetimeIndex</em>) – The indices to use for training the
metalabeling model, they should be a subset
of the indices in the dataframes</p></li>
<li><p><strong>align_on</strong> (<em>str</em>) – The name of the input dataframe we want to align the
other dataframes to</p></li>
<li><p><strong>align_how</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – The methodologies to use for alignment of the
dataframes</p></li>
</ul>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The strategy signal pipeline</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p><a class="reference internal" href="#mizarlabs.model.pipeline.StrategySignalPipeline" title="mizarlabs.model.pipeline.StrategySignalPipeline">StrategySignalPipeline</a></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.get_side">
<code class="sig-name descname"><span class="pre">get_side</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.series.Series</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.get_side"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.get_side" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the side of the position</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sides of the positions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.get_size">
<code class="sig-name descname"><span class="pre">get_size</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.series.Series</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.get_size"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.get_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Calculate the size of the position</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The sizes of the positions</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.predict">
<code class="sig-name descname"><span class="pre">predict</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.predict"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.predict" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the classes for the primary and metalabeling model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Predicted probabilities for primary and metalabeling model</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, pd.DataFrame]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.predict_proba">
<code class="sig-name descname"><span class="pre">predict_proba</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.predict_proba"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.predict_proba" title="Permalink to this definition">¶</a></dt>
<dd><p>Predict the probabilities for the primary and metalabeling model</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Predicted probabilities for primary and metalabeling model</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, pd.DataFrame]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategySignalPipeline.transform">
<code class="sig-name descname"><span class="pre">transform</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategySignalPipeline.transform"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategySignalPipeline.transform" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the feature transformers (if available) on the data.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
metalabeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>Dictionary containing the features per each model transformed</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>Dict[str, Dict[str, pd.DataFrame]]</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.pipeline.StrategyTrader">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.pipeline.</span></code><code class="sig-name descname"><span class="pre">StrategyTrader</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">strategy_pipeline</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><a class="reference internal" href="#mizarlabs.model.pipeline.StrategySignalPipeline" title="mizarlabs.model.pipeline.StrategySignalPipeline"><span class="pre">mizarlabs.model.pipeline.StrategySignalPipeline</span></a></span></em>, <em class="sig-param"><span class="n"><span class="pre">min_num_bars</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">num_expiration_bars</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stop_loss_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profit_taking_factor</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">volatility_window</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">100</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategyTrader"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategyTrader" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>What is my purpose?</p>
<p>Interacts with the data provider,
use the strategy pipeline to make a prediction,
Based on a prediction produces all the information to create a position
(side, size, expiration, profit taking, stop loss)</p>
<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategyTrader.create_position">
<code class="sig-name descname"><span class="pre">create_position</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategyTrader.create_position"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategyTrader.create_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a dataframe that can be used to evaluate the strategy.</p>
<p>The dataframe contains close, stop_loss, profit_taking,
number of expiration bars, posiion size and side.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>The strategy positions and related informations</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategyTrader.create_signal">
<code class="sig-name descname"><span class="pre">create_signal</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategyTrader.create_signal"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategyTrader.create_signal" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the signal info dataframe (size and side)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with size and side</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.pipeline.StrategyTrader.create_strategy_bars">
<code class="sig-name descname"><span class="pre">create_strategy_bars</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X_dict</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span> </span><span class="pre">pandas.core.frame.DataFrame</span><span class="p"><span class="pre">]</span></span></span></em><span class="sig-paren">)</span> &#x2192; <span class="pre">pandas.core.frame.DataFrame</span><a class="reference internal" href="_modules/mizarlabs/model/pipeline.html#StrategyTrader.create_strategy_bars"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.pipeline.StrategyTrader.create_strategy_bars" title="Permalink to this definition">¶</a></dt>
<dd><p>Create the dataframe with the strategy bars information (stoploss,
take profit and expiration)</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><p><strong>X_dict</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>pd.DataFrame</em><em>]</em>) – A dictionary containing features for the primary and
meta-labeling model</p>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><p>dataframe with stop loss, taking profit and expiration</p>
</dd>
<dt class="field-odd">Return type</dt>
<dd class="field-odd"><p>pd.DataFrame</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mizarlabs.model.sequentially_bootstrapped_bagging_classifier">
<span id="mizarlabs-model-sequentially-bootstrapped-bagging-classifier-module"></span><h2>mizarlabs.model.sequentially_bootstrapped_bagging_classifier module<a class="headerlink" href="#module-mizarlabs.model.sequentially_bootstrapped_bagging_classifier" title="Permalink to this headline">¶</a></h2>
<dl class="py class">
<dt id="mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaggingClassifier">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.sequentially_bootstrapped_bagging_classifier.</span></code><code class="sig-name descname"><span class="pre">SequentiallyBootstrappedBaggingClassifier</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples_info_sets</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_bars</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_estimator</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">sklearn.base.BaseEstimator</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_estimators</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_samples</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap_features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oob_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warm_start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.random.mtrand.RandomState</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_end_time_column_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'event_end_time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_probs_every</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/sequentially_bootstrapped_bagging_classifier.html#SequentiallyBootstrappedBaggingClassifier"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaggingClassifier" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging" title="mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging"><code class="xref py py-class docutils literal notranslate"><span class="pre">mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging</span></code></a>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.ensemble._bagging.BaggingClassifier</span></code>, <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.base.ClassifierMixin</span></code></p>
<p>A Sequentially Bootstrapped Bagging classifier is an ensemble meta-estimator that fits base
classifiers each on random subsets of the original dataset generated using
Sequential Bootstrapping sampling procedure and then aggregate their individual predictions (
either by voting or by averaging) to form a final prediction. Such a meta-estimator can typically be used as
a way to reduce the variance of a black-box estimator (e.g., a decision
tree), by introducing randomization into its construction procedure and
then making an ensemble out of it.
:param samples_info_sets: pd.Series, The information range on which each record is constructed from</p>
<blockquote>
<div><p><em>samples_info_sets.index</em>: Time when the information extraction started.
<em>samples_info_sets.value</em>: Time when the information extraction ended.</p>
</div></blockquote>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>price_bars</strong> – pd.DataFrame
Price bars used in samples_info_sets generation</p></li>
<li><p><strong>base_estimator</strong> – object or None, optional (default=None)
The base estimator to fit on random subsets of the dataset.
If None, then the base estimator is a decision tree.</p></li>
<li><p><strong>n_estimators</strong> – int, optional (default=10)
The number of base estimators in the ensemble.</p></li>
<li><p><strong>max_samples</strong> – int or float, optional (default=1.0)
The number of samples to draw from X to train each base estimator.
If int, then draw <cite>max_samples</cite> samples. If float, then draw <cite>max_samples * X.shape[0]</cite> samples.</p></li>
<li><p><strong>max_features</strong> – int or float, optional (default=1.0)
The number of features to draw from X to train each base estimator.
If int, then draw <cite>max_features</cite> features. If float, then draw <cite>max_features * X.shape[1]</cite> features.</p></li>
<li><p><strong>bootstrap_features</strong> – boolean, optional (default=False)
Whether features are drawn with replacement.</p></li>
<li><p><strong>oob_score</strong> – bool, optional (default=False)
Whether to use out-of-bag samples to estimate
the generalization error.</p></li>
<li><p><strong>warm_start</strong> – bool, optional (default=False)
When set to True, reuse the solution of the previous call to fit
and add more estimators to the ensemble, otherwise, just fit
a whole new ensemble.</p></li>
<li><p><strong>n_jobs</strong> – int or None, optional (default=None)
The number of jobs to run in parallel for both <cite>fit</cite> and <cite>predict</cite>.
<code class="docutils literal notranslate"><span class="pre">None</span></code> means 1 unless in a <code class="xref py py-obj docutils literal notranslate"><span class="pre">joblib.parallel_backend</span></code> context.
<code class="docutils literal notranslate"><span class="pre">-1</span></code> means using all processors.</p></li>
<li><p><strong>random_state</strong> – int, RandomState instance or None, optional (default=None)
If int, random_state is the seed used by the random number generator;
If RandomState instance, random_state is the random number generator;
If None, the random number generator is the RandomState instance used
by <cite>np.random</cite>.</p></li>
<li><p><strong>verbose</strong> – int, optional (default=0)
Controls the verbosity when fitting and predicting.</p></li>
<li><p><strong>event_end_time_column_name</strong> – str, optional (default=EXPIRATION_BARRIER)
name of the column with the expiration barrier dates.</p></li>
<li><p><strong>update_probs_every</strong> – int, optional (default=1)
Only update the sampling probabilities with average uniqueness after
update_probs_every times, this will speed up training, but at the cost that you
do not sample perfectly according to the average uniqueness</p></li>
</ul>
</dd>
<dt class="field-even">Variables</dt>
<dd class="field-even"><ul class="simple">
<li><p><strong>base_estimator</strong> – estimator
The base estimator from which the ensemble is grown.</p></li>
<li><p><strong>estimators</strong> – list of estimators
The collection of fitted base estimators.</p></li>
<li><p><strong>estimators_samples</strong> – list of arrays
The subset of drawn samples (i.e., the in-bag samples) for each base
estimator. Each subset is defined by an array of the indices selected.</p></li>
<li><p><strong>estimators_features</strong> – list of arrays
The subset of drawn features for each base estimator.</p></li>
<li><p><strong>classes</strong> – array of shape = [n_classes]
The classes labels.</p></li>
<li><p><strong>n_classes</strong> – int or list
The number of classes.</p></li>
<li><p><strong>oob_score</strong> – float
Score of the training dataset obtained using an out-of-bag estimate.</p></li>
<li><p><strong>oob_decision_function</strong> – array of shape = [n_samples, n_classes]
Decision function computed with out-of-bag estimate on the training
set. If n_estimators is small it might be possible that a data point
was never left out during the bootstrap. In this case,
<cite>oob_decision_function_</cite> might contain NaN.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py class">
<dt id="mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging">
<em class="property"><span class="pre">class</span> </em><code class="sig-prename descclassname"><span class="pre">mizarlabs.model.sequentially_bootstrapped_bagging_classifier.</span></code><code class="sig-name descname"><span class="pre">SequentiallyBootstrappedBaseBagging</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">samples_info_sets</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">price_bars</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_estimator</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">sklearn.base.BaseEstimator</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_estimators</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">10</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_samples</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1.0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bootstrap_features</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">oob_score</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">warm_start</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">bool</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_jobs</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">random_state</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">Union</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span> </span><span class="pre">numpy.random.mtrand.RandomState</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">verbose</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">0</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">event_end_time_column_name</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">str</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">'event_end_time'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">update_probs_every</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">int</span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/sequentially_bootstrapped_bagging_classifier.html#SequentiallyBootstrappedBaseBagging"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">sklearn.ensemble._bagging.BaseBagging</span></code></p>
<p>Base class for Sequentially Bootstrapped Classifier and Regressor, extension of sklearn’s BaseBagging</p>
<dl class="py method">
<dt id="mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging.fit">
<code class="sig-name descname"><span class="pre">fit</span></code><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">X</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.frame.DataFrame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">y</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">pandas.core.series.Series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sample_weight</span></span><span class="p"><span class="pre">:</span></span> <span class="n"><span class="pre">Optional</span><span class="p"><span class="pre">[</span></span><span class="pre">pandas.core.series.Series</span><span class="p"><span class="pre">]</span></span></span> <span class="o"><span class="pre">=</span></span> <span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/mizarlabs/model/sequentially_bootstrapped_bagging_classifier.html#SequentiallyBootstrappedBaseBagging.fit"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging.fit" title="Permalink to this definition">¶</a></dt>
<dd><dl class="simple">
<dt>Build a Sequentially Bootstrapped Bagging ensemble of estimators from the training</dt><dd><p>set (X, y).</p>
</dd>
</dl>
<dl class="simple">
<dt>X<span class="classifier">{array-like, sparse matrix} of shape = [n_samples, n_features]</span></dt><dd><p>The training input samples. Sparse matrices are accepted only if
they are supported by the base estimator.</p>
</dd>
<dt>y<span class="classifier">array-like, shape = [n_samples]</span></dt><dd><p>The target values (class labels in classification, real numbers in
regression).</p>
</dd>
<dt>sample_weight<span class="classifier">array-like, shape = [n_samples] or None</span></dt><dd><p>Sample weights. If None, then samples are equally weighted.
Note that this is supported only if the base estimator supports
sample weighting.</p>
</dd>
</dl>
<p>self : object</p>
</dd></dl>

<dl class="py method">
<dt id="mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging.ind_mat">
<em class="property"><span class="pre">property</span> </em><code class="sig-name descname"><span class="pre">ind_mat</span></code><a class="headerlink" href="#mizarlabs.model.sequentially_bootstrapped_bagging_classifier.SequentiallyBootstrappedBaseBagging.ind_mat" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="module-mizarlabs.model">
<span id="module-contents"></span><h2>Module contents<a class="headerlink" href="#module-mizarlabs.model" title="Permalink to this headline">¶</a></h2>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="index.html">MizarLabs</a></h1>








<h3>Navigation</h3>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="index.html">Documentation overview</a><ul>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2021, MizarAI.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 3.5.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="_sources/mizarlabs.model.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>